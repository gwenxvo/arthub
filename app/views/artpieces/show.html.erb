<div class="container">
  <div class="link-bar"> <%= link_to 'Back', artpieces_path %></div>
  <div class="container-photo-info">
    <div class="container-photo" data-controller="gallery">
      <%= cl_image_tag @artpiece.photos.first.key, class: "gallery-main", data: {gallery_target: "photo"} %>
        <div class="gallery">
          <i class="fa-solid fa-chevron-left"></i>
          <% @artpiece.photos[1..].each do |photo| %>
              <%= cl_image_tag photo.key, crop: :fill, class: "gallery-item", data: {action: "click->gallery#change"} %>
          <% end %>
          <i class="fa-solid fa-chevron-right"></i>
        </div>
    </div>

    <div>
      <div class="container-details">
        <h1><strong><%= @artpiece.title %></strong></h1>

        <% if @artpiece.artist.present? %>
          <p><strong><%= @artpiece.artist %></strong>
        <% else %>
          Unknown
        <% end %>
          · €<%= @artpiece.day_price %>/day</p>
        <p><%= @artpiece.description %></p>
      </div>

      <div class="container-booking">
        <h4><strong><%= @artpiece.day_price %> € per day</strong></h4>
        <%= simple_form_for([@artpiece, @booking]) do |f| %>
          <%= f.input :start_date, as: :string, input_html: {class: "datepicker"} %>
          <%= f.input :end_date, as: :string, input_html: {class: "datepicker"} %>
          <%= f.submit class: "btn btn-primary", value: "BOOK PAINTING NOW" %>
        <% end %>
      </div>

    </div>
  </div>


  <div class="container-review">
        <div class="container-all-reviews">
          <h3>Ratings</h3>
            <% @artpiece.ratings.each do |rating| %>
              <div class='review'>
                <% rating.rating.times do |star| %>
                  <i class="fa-solid fa-star"></i>
                <% end %>
                <p><%= rating.content %></p>
              </div>
            <% end %>
        </div>

        <div class="container-add-review">
          <h3>Add Your Rating</h3>
          <%= simple_form_for([@artpiece, @rating]) do |f| %>
              <%= f.input :content %>
              <%= f.input :rating, collection: (1..5).to_a, input_html: {data: {controller: "star-rating"}} %>
              <%= f.submit class: "btn btn-primary" %>
          <% end %>
        </div>

      </div>
</div>
